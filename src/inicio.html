<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Consumption | Inicio</title>
    <link rel="icon" type="image/png" href="src/icons/icono.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #27ae60;
            --warning-color: #e74c3c;
            --light-bg: #ecf0f1;
            --dark-text: #333;
            --light-text: #fff;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
        }
        
        body {
            display: flex;
            background-color: #f5f5f5;
            color: var(--dark-text);
            min-height: 100vh;
        }
        
        /* Menú vertical */
        .menu {
            width: 250px;
            background-color: var(--primary-color);
            color: var(--light-text);
            height: 100vh;
            padding: 30px 0;
            position: fixed;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        
        .menu-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .menu-logo {
            width: 40px;
            margin-right: 10px;
        }
        
        .menu-title {
            font-size: 18px;
            font-weight: 500;
        }
        
        .menu-btn {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 12px 25px;
            background: none;
            border: none;
            color: var(--light-text);
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .menu-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .menu-btn.active {
            background-color: var(--secondary-color);
        }
        
        .menu-icon {
            margin-right: 10px;
            font-size: 18px;
        }
        
        /* Contenido principal */
        .content {
            flex: 1;
            margin-left: 250px;
            padding: 30px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: 500;
        }
        
        .page {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .page.active {
            display: block;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        /* Estilos para dispositivos */
        .appliance-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .appliance-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .appliance-card.selected {
            border-color: var(--accent-color);
            background-color: #e8f5e9;
        }
        
        .appliance-card h3 {
            margin-left: 15px;
            color: var(--primary-color);
            font-size: 16px;
        }
        
        .appliance-icon {
            font-size: 28px;
            width: 50px;
            height: 50px;
            background-color: #f8f9fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary-color);
        }
        
        /* Estilos para inputs */
        .hours-input {
            width: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin-left: auto;
            font-size: 14px;
        }
        
        /* Botones */
        .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: inline-block;
            min-width: 120px;
            text-align: center;
            font-weight: 500;
        }
        
        .btn:hover {
            background-color: #2ecc71;
        }
        
        .btn-secondary {
            background-color: #7f8c8d;
            margin-right: 15px;
        }
        
        .btn-secondary:hover {
            background-color: #95a5a6;
        }
        
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        /* Resumen */
        .summary {
            background: linear-gradient(135deg, var(--primary-color) 0%, #34495e 100%);
            color: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .summary h2 {
            margin-top: 0;
            text-align: center;
            font-size: 22px;
            margin-bottom: 20px;
        }
        
        .consumption-value {
            font-size: 36px;
            font-weight: 700;
            text-align: center;
            margin: 15px 0;
        }
        
        .consumption-high {
            color: var(--warning-color);
            font-weight: bold;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.2);
            text-align: center;
        }
        
        /* Recomendaciones */
        .recommendations {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .recommendations h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .recommendations ul {
            padding-left: 20px;
        }
        
        .recommendations li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        /* Lista de dispositivos seleccionados */
        .selected-appliance {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .selected-appliance h3 {
            flex: 1;
            margin-left: 15px;
            font-size: 15px;
        }
        
        /* Página de inicio */
        .welcome-message {
            text-align: center;
            margin-bottom: 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .welcome-message p {
            color: #7f8c8d;
            line-height: 1.6;
            font-size: 16px;
        }
        
        .app-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        
        .feature-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .feature-icon {
            font-size: 36px;
            margin-bottom: 20px;
            color: var(--secondary-color);
            text-align: center;
        }
        
        .feature-card h3 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 10px;
        }
        
        .feature-card p {
            color: #7f8c8d;
            text-align: center;
            font-size: 14px;
            line-height: 1.6;
        }
        
        /* Formulario para agregar dispositivo */
        .add-appliance-form {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 40px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        
        .add-appliance-form h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }
        
        .btn-add {
            background-color: var(--secondary-color);
        }
        
        .btn-add:hover {
            background-color: #2980b9;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .menu {
                width: 70px;
                padding: 20px 0;
            }
            
            .menu-header {
                justify-content: center;
                padding: 0 10px 20px;
            }
            
            .menu-title {
                display: none;
            }
            
            .menu-btn span {
                display: none;
            }
            
            .menu-icon {
                margin-right: 0;
                font-size: 20px;
            }
            
            .content {
                margin-left: 70px;
                padding: 20px;
            }
            
            .btn-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn-secondary {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Menú vertical -->
    <div class="menu">
        <div class="menu-header">
            <svg class="menu-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
            </svg>
            <span class="menu-title">Energy Control</span>
        </div>
        
        <button class="menu-btn active" data-page="inicio">
            <span class="menu-icon">🏠</span>
            <span>Inicio</span>
        </button>
        <button class="menu-btn" data-page="dispositivos">
            <span class="menu-icon">📱</span>
            <span>Dispositivos</span>
        </button>
        <button class="menu-btn" data-page="configuracion">
            <span class="menu-icon">⚙️</span>
            <span>Configuración</span>
        </button>
        <button class="menu-btn" data-page="ayuda">
            <span class="menu-icon">❓</span>
            <span>Ayuda</span>
        </button>
    </div>
    
    <!-- Contenido principal -->
    <div class="content">
        <div class="header">
            <h1>Panel de Control</h1>
            <div class="user-info">
                <div class="user-avatar">U</div>
                <span>Usuario</span>
            </div>
        </div>
        
        <!-- Página de inicio -->
        <div class="page active" id="inicio">
            <div class="welcome-message">
                <h1>Evaluación y Reducción del Consumo Energético</h1>
                <p>Bienvenido al sistema de control de consumo energético para el hogar. Esta herramienta te ayudará a calcular, monitorear y optimizar tu consumo de energía eléctrica, reduciendo costos y contribuyendo al cuidado del medio ambiente.</p>
            </div>
            
            <div class="app-features">
                <div class="feature-card">
                    <div class="feature-icon">💡</div>
                    <h3>Monitoreo Inteligente</h3>
                    <p>Calcula el consumo exacto de todos tus electrodomésticos y dispositivos eléctricos en tiempo real.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">💰</div>
                    <h3>Ahorro Económico</h3>
                    <p>Identifica oportunidades para reducir tus costos de energía sin sacrificar tu comodidad.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🌱</div>
                    <h3>Sostenibilidad</h3>
                    <p>Contribuye al cuidado del medio ambiente reduciendo tu huella de carbono.</p>
                </div>
            </div>
        </div>
        
        <!-- Página de selección de dispositivos -->
        <div class="page" id="dispositivos">
            <h1>Gestión de Dispositivos</h1>
            <p>Selecciona los electrodomésticos que deseas incluir en el cálculo de consumo:</p>
            
            <div id="appliances-list">
                <div class="appliance-card" data-appliance="televisor">
                    <div class="appliance-icon">📺</div>
                    <h3>Televisor</h3>
                </div>
                <div class="appliance-card" data-appliance="nevera">
                    <div class="appliance-icon">❄️</div>
                    <h3>Nevera</h3>
                </div>
                <div class="appliance-card" data-appliance="bombillas">
                    <div class="appliance-icon">💡</div>
                    <h3>Bombillas</h3>
                </div>
                <div class="appliance-card" data-appliance="aire">
                    <div class="appliance-icon">🌬️</div>
                    <h3>Aire acondicionado</h3>
                </div>
                <div class="appliance-card" data-appliance="lavadora">
                    <div class="appliance-icon">🧺</div>
                    <h3>Lavadora</h3>
                </div>
                <div class="appliance-card" data-appliance="microondas">
                    <div class="appliance-icon">🍲</div>
                    <h3>Microondas</h3>
                </div>
                <div class="appliance-card" data-appliance="computadora">
                    <div class="appliance-icon">💻</div>
                    <h3>Computadora</h3>
                </div>
                <div class="appliance-card" data-appliance="ventilador">
                    <div class="appliance-icon">🌀</div>
                    <h3>Ventilador</h3>
                </div>
            </div>
            
            <!-- Formulario para agregar dispositivo personalizado -->
            <div class="add-appliance-form">
                <h3>Agregar dispositivo personalizado</h3>
                <div class="form-group">
                    <label for="new-appliance-name">Nombre del dispositivo:</label>
                    <input type="text" id="new-appliance-name" placeholder="Ej: Secadora de pelo">
                </div>
                <div class="form-group">
                    <label for="new-appliance-power">Potencia (Watts):</label>
                    <input type="number" id="new-appliance-power" placeholder="Ej: 1500">
                </div>
                <button class="btn btn-add" id="btn-add-appliance">Agregar dispositivo</button>
            </div>
            
            <div class="btn-container">
                <button class="btn btn-secondary" id="btn-back-to-home">Regresar</button>
                <button class="btn" id="btn-next">Siguiente</button>
            </div>
        </div>
        
        <!-- Página de configuración de horas -->
        <div class="page" id="configuracion-horas">
            <h1>Configuración de Consumo</h1>
            <p>Ingresa las horas de uso diario para cada dispositivo seleccionado:</p>
            
            <div id="selected-appliances-list">
                <!-- Los dispositivos seleccionados aparecerán aquí -->
            </div>
            
            <div class="btn-container">
                <button class="btn btn-secondary" id="btn-back-to-devices">Regresar</button>
                <button class="btn" id="btn-calculate">Calcular consumo</button>
            </div>
            
            <div class="summary" id="consumo-resumen" style="display: none;">
                <h2>Resumen de Consumo</h2>
                <div class="consumption-value">
                    <span id="total-consumo">0.0</span> kWh
                </div>
                <p style="text-align: center;"><strong>Costo estimado:</strong> $<span id="costo-estimado">0</span> COP/día</p>
                <p class="consumption-high" id="consumption-warning" style="display: none;"></p>
            </div>
            
            <div class="recommendations" id="energy-recommendations" style="display: none;">
                <h3>Recomendaciones para ahorrar energía</h3>
                <ul id="recommendations-list">
                    <!-- Las recomendaciones aparecerán aquí -->
                </ul>
            </div>
        </div>
        
        <!-- Página de configuración -->
        <div class="page" id="configuracion">
            <h1>Configuración del Sistema</h1>
            <p>Configura los parámetros de tu sistema de monitoreo energético.</p>
            
            <div class="btn-container">
                <button class="btn btn-secondary" id="btn-back-to-home-from-config">Regresar</button>
            </div>
        </div>
        
        <!-- Página de ayuda -->
        <div class="page" id="ayuda">
            <h1>Centro de Ayuda</h1>
            <p>Encuentra respuestas a tus preguntas y aprende a usar el sistema.</p>
            
            <div class="btn-container">
                <button class="btn btn-secondary" id="btn-back-to-home-from-help">Regresar</button>
            </div>
        </div>
    </div>
    
    <script>
        // Variables globales
        let selectedAppliances = [];
        const applianceData = {
            televisor: { potencia: 0.1, icon: '📺', category: 'entretenimiento' },
            nevera: { potencia: 0.15, icon: '❄️', category: 'linea-blanca' },
            bombillas: { potencia: 0.06, icon: '💡', category: 'iluminacion' },
            aire: { potencia: 1.5, icon: '🌬️', category: 'climatizacion' },
            lavadora: { potencia: 0.5, icon: '🧺', category: 'linea-blanca' },
            microondas: { potencia: 0.8, icon: '🍲', category: 'cocina' },
            computadora: { potencia: 0.3, icon: '💻', category: 'tecnologia' },
            ventilador: { potencia: 0.05, icon: '🌀', category: 'climatizacion' }
        };
        const costPerKWh = 750; // COP por kWh
        
        // Recomendaciones por categoría de consumo
        const recommendations = {
            high: [
                "Su consumo es muy alto. Considere reducir el uso de dispositivos de alto consumo como aire acondicionado y hornos.",
                "Desconecte los electrodomésticos que no esté usando (el modo standby sigue consumiendo energía).",
                "Revise si sus electrodomésticos son eficientes (busque etiqueta A+++).",
                "Use cortinas térmicas para reducir la necesidad de aire acondicionado.",
                "Programe el termostato del aire acondicionado a 24°C en lugar de temperaturas más bajas."
            ],
            medium: [
                "Su consumo es moderado. Puede optimizarlo con estos consejos:",
                "Use bombillas LED que consumen hasta 80% menos energía.",
                "Lave cargas completas en la lavadora y use agua fría cuando sea posible.",
                "Mantenga limpios los filtros del aire acondicionado para mayor eficiencia.",
                "Aproveche la luz natural abriendo cortinas durante el día."
            ],
            low: [
                "¡Buen trabajo! Su consumo es eficiente. Para mantenerlo:",
                "Continue con buenos hábitos como desconectar dispositivos no usados.",
                "Considere instalar sensores de movimiento para luces en áreas poco usadas.",
                "Revise periódicamente el estado de sus electrodomésticos para mantener su eficiencia.",
                "Si es posible, explore opciones de energía renovable como paneles solares."
            ],
            categorySpecific: {
                'aire': [
                    "El aire acondicionado es uno de los mayores consumidores. Úselo solo cuando sea necesario.",
                    "Mantenga las puertas y ventanas cerradas cuando el aire esté encendido.",
                    "Limpie los filtros mensualmente para mantener la eficiencia."
                ],
                'nevera': [
                    "No coloque alimentos calientes en la nevera, deje que se enfríen primero.",
                    "Mantenga la temperatura entre 3°C y 5°C para el refrigerador y -18°C para el congelador.",
                    "Descongele regularmente si no tiene sistema automático."
                ],
                'bombillas': [
                    "Reemplace todas las bombillas incandescentes por LED.",
                    "Use iluminación dirigida (como lámparas de escritorio) en lugar de iluminar toda la habitación.",
                    "Pinte paredes y techos de colores claros para reflejar mejor la luz."
                ]
            }
        };
        
        // Navegación del menú
        document.querySelectorAll('.menu-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remover clase active de todos los botones
                document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
                // Agregar clase active al botón clickeado
                this.classList.add('active');
                
                // Ocultar todas las páginas
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                // Mostrar la página correspondiente
                const pageId = this.getAttribute('data-page');
                document.getElementById(pageId).classList.add('active');
            });
        });
        
        // Botones de regresar
        document.getElementById('btn-back-to-home').addEventListener('click', function() {
            navigateToPage('inicio');
        });
        
        document.getElementById('btn-back-to-devices').addEventListener('click', function() {
            navigateToPage('dispositivos');
        });
        
        document.getElementById('btn-back-to-home-from-config').addEventListener('click', function() {
            navigateToPage('inicio');
        });
        
        document.getElementById('btn-back-to-home-from-help').addEventListener('click', function() {
            navigateToPage('inicio');
        });
        
        function navigateToPage(pageId) {
            document.querySelectorAll('.menu-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-page') === pageId) {
                    btn.classList.add('active');
                }
            });
            
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }
        
        // Selección de dispositivos
        document.querySelectorAll('.appliance-card').forEach(card => {
            card.addEventListener('click', function() {
                this.classList.toggle('selected');
                
                const applianceId = this.getAttribute('data-appliance');
                const index = selectedAppliances.indexOf(applianceId);
                
                if (index === -1) {
                    selectedAppliances.push(applianceId);
                } else {
                    selectedAppliances.splice(index, 1);
                }
            });
        });
        
        // Agregar dispositivo personalizado
        document.getElementById('btn-add-appliance').addEventListener('click', function() {
            const nameInput = document.getElementById('new-appliance-name');
            const powerInput = document.getElementById('new-appliance-power');
            
            const name = nameInput.value.trim();
            const power = parseFloat(powerInput.value);
            
            if (!name || isNaN(power) || power <= 0) {
                alert('Por favor ingrese un nombre válido y una potencia mayor que 0');
                return;
            }
            
            // Crear un ID único para el nuevo dispositivo
            const applianceId = name.toLowerCase().replace(/\s+/g, '-');
            
            // Agregar a la lista de dispositivos
            applianceData[applianceId] = {
                potencia: power / 1000, // Convertir a kW
                icon: '🔌', // Icono genérico
                category: 'personalizado'
            };
            
            // Crear y agregar la tarjeta del nuevo dispositivo
            const appliancesList = document.getElementById('appliances-list');
            const newCard = document.createElement('div');
            newCard.className = 'appliance-card';
            newCard.setAttribute('data-appliance', applianceId);
            newCard.innerHTML = `
                <div class="appliance-icon">🔌</div>
                <h3>${name}</h3>
            `;
            appliancesList.appendChild(newCard);
            
            // Agregar evento de click a la nueva tarjeta
            newCard.addEventListener('click', function() {
                this.classList.toggle('selected');
                
                const index = selectedAppliances.indexOf(applianceId);
                
                if (index === -1) {
                    selectedAppliances.push(applianceId);
                } else {
                    selectedAppliances.splice(index, 1);
                }
            });
            
            // Limpiar formulario
            nameInput.value = '';
            powerInput.value = '';
            
            alert(`Dispositivo "${name}" agregado correctamente!`);
        });
        
        // Botón Siguiente en selección de dispositivos
        document.getElementById('btn-next').addEventListener('click', function() {
            if (selectedAppliances.length === 0) {
                alert('Por favor selecciona al menos un dispositivo');
                return;
            }
            
            // Generar lista de dispositivos seleccionados con inputs
            const container = document.getElementById('selected-appliances-list');
            container.innerHTML = '';
            
            selectedAppliances.forEach(applianceId => {
                const appliance = applianceData[applianceId];
                
                const div = document.createElement('div');
                div.className = 'selected-appliance';
                div.innerHTML = `
                    <div class="appliance-icon">${appliance.icon}</div>
                    <h3>${applianceId.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}</h3>
                    <input type="number" class="hours-input" data-appliance="${applianceId}" 
                           placeholder="Horas" min="0" max="24" step="0.5" value="0">
                `;
                container.appendChild(div);
            });
            
            // Ocultar página actual y mostrar página de configuración de horas
            navigateToPage('configuracion-horas');
            
            // Ocultar resultados anteriores
            document.getElementById('consumo-resumen').style.display = 'none';
            document.getElementById('energy-recommendations').style.display = 'none';
        });
        
        // Botón Calcular consumo
        document.getElementById('btn-calculate').addEventListener('click', function() {
            let totalConsumption = 0;
            const applianceConsumption = {};
            
            // Calcular consumo para cada dispositivo
            selectedAppliances.forEach(applianceId => {
                const input = document.querySelector(`.hours-input[data-appliance="${applianceId}"]`);
                const hours = parseFloat(input.value) || 0;
                const consumption = hours * applianceData[applianceId].potencia;
                totalConsumption += consumption;
                applianceConsumption[applianceId] = consumption;
            });
            
            const estimatedCost = Math.round(totalConsumption * costPerKWh);
            
            // Actualizar resumen
            document.getElementById('total-consumo').textContent = totalConsumption.toFixed(1);
            document.getElementById('costo-estimado').textContent = estimatedCost.toLocaleString('es-CO');
            document.getElementById('consumo-resumen').style.display = 'block';
            
            // Mostrar advertencia y recomendaciones basadas en el consumo
            showEnergyRecommendations(totalConsumption, applianceConsumption);
        });
        
        // Mostrar recomendaciones de ahorro de energía
        function showEnergyRecommendations(totalConsumption, applianceConsumption) {
            const warningElement = document.getElementById('consumption-warning');
            const recommendationsElement = document.getElementById('recommendations-list');
            recommendationsElement.innerHTML = '';
            
            // Determinar nivel de consumo
            let consumptionLevel = 'low';
            if (totalConsumption > 20) {
                consumptionLevel = 'high';
                warningElement.textContent = "¡ALTO CONSUMO! Reduzca el uso de dispositivos para ahorrar energía.";
            } else if (totalConsumption > 10) {
                consumptionLevel = 'medium';
                warningElement.textContent = "Consumo moderado. Puede optimizar aún más su uso de energía.";
            } else {
                warningElement.textContent = "Consumo eficiente. ¡Siga así!";
            }
            
            warningElement.style.display = 'block';
            
            // Agregar recomendaciones generales
            recommendations[consumptionLevel].forEach(rec => {
                const li = document.createElement('li');
                li.textContent = rec;
                recommendationsElement.appendChild(li);
            });
            
            // Agregar recomendaciones específicas por dispositivos de alto consumo
            selectedAppliances.forEach(applianceId => {
                if (applianceConsumption[applianceId] > 2 && recommendations.categorySpecific[applianceId]) {
                    const categoryTitle = document.createElement('li');
                    categoryTitle.innerHTML = `<strong>Para ${applianceId.split('-').join(' ')}:</strong>`;
                    recommendationsElement.appendChild(categoryTitle);
                    
                    recommendations.categorySpecific[applianceId].forEach(rec => {
                        const li = document.createElement('li');
                        li.textContent = rec;
                        recommendationsElement.appendChild(li);
                    });
                }
            });
            
            // Mostrar sección de recomendaciones
            document.getElementById('energy-recommendations').style.display = 'block';
        }
    </script>
</body>
</html>